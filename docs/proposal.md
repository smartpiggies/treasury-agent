# Treasury Agent: Crypto Without the Complexity

**EthGlobal HackMoney 2026**

---

## The Problem

Crypto promises financial sovereignty, DeFi yields, and a new financial system. But for most people, it delivers:

- Terrifying wallet interfaces where one wrong click loses everything
- Dozens of chains, bridges, and protocols to understand
- Technical jargon that excludes anyone without hours to learn
- Single points of failure (one person holds the keys)

**The result?** Your family members, your busy friends, your non-technical colleagues - people who *want* to participate in crypto - **can't**. The barrier to entry isn't interest. It's complexity.

---

## The Insight

The magic of modern AI tools isn't raw capability - it's **approachability**. Tools like n8n and AI agents succeed because they make powerful automation feel like having a conversation.

What if we applied this to crypto?

Instead of teaching someone to:
- Install MetaMask and secure a seed phrase
- Understand gas fees and bridge risks
- Navigate confusing DeFi interfaces
- Avoid scams and phishing attacks

...what if they could just type in Discord:

> *"@TreasuryAgent what's our balance?"*
> *"@TreasuryAgent convert $500 of ETH to stablecoins"*
> *"@TreasuryAgent how did we do this month?"*

---

## What We're Building

**Treasury Agent** is a Discord-native AI that manages crypto for families, teams, and small organizations through conversation.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TREASURY AGENT                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  "Just chat. The agent handles the complexity."                 â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚   ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦  Family Discord Server                            â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚   Mom: "@TreasuryAgent what's our balance?"             â”‚   â”‚
â”‚  â”‚   Agent: "You have $12,340 total - $8,200 in            â”‚   â”‚
â”‚  â”‚          stablecoins and $4,140 in ETH"                 â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚   Dad: "@TreasuryAgent move $2000 to savings"           â”‚   â”‚
â”‚  â”‚   Agent: "Got it! This needs Mom's approval too.        â”‚   â”‚
â”‚  â”‚          @Mom can you confirm?"                         â”‚   â”‚
â”‚  â”‚   Mom: "âœ… Approved"                                     â”‚   â”‚
â”‚  â”‚   Agent: "Done! Moved $2000 to the savings vault."      â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Discord-first â”‚ Plain English â”‚ Family Consensus â”‚ Proactive  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### For the Less Technical
Zero learning curve. Just chat. See your family's crypto grow, participate in decisions, understand what's happening - all in plain English, in Discord where you already are.

### For Busy People
Faster than any wallet UI. The agent is proactive - it monitors positions, alerts you when action is needed, and handles the execution. You just approve.

### For Security
N-of-M confirmations via Discord. "Mom and one sibling must approve any move over $500." This is arguably *more secure* than single-key wallets with 2FA - it requires **social consensus**, not just device access.

### For Transparency
Everyone sees the same reports, alerts, and decisions. No black box. The less-technical family members aren't locked out - they're equal participants.

---

## Who Is This For?

| Audience | Their Problem | How Treasury Agent Helps |
|----------|--------------|-------------------------|
| **Families** | "I want to invest in crypto with my kids but can't teach them all the technical stuff" | Everyone participates via Discord chat; family consensus on big decisions |
| **Small Teams** | "Our startup has crypto reserves but managing them is a full-time job" | Agent handles monitoring and execution; team approves via Discord |
| **Investment Clubs** | "We pool money but one person holds all the keys" | Democratic control via n-of-m approvals; transparent reporting |
| **Crypto-curious** | "I want to participate but the interfaces terrify me" | No interfaces to learn - just conversation |

---

## Table of Contents

1. [Core Features](#core-features)
2. [How It Works](#how-it-works)
3. [Partner Prize Strategy](#partner-prize-strategy)
4. [Technical Architecture](#technical-architecture)
5. [Workflow Details](#workflow-details)
6. [Technology Deep Dives](#technology-deep-dives)
7. [N-of-M Approval System](#n-of-m-approval-system)
8. [Execution Layer Design](#execution-layer-design)
9. [Development Plan](#development-plan)
10. [Success Metrics](#success-metrics)
11. [Resources & Appendix](#resources--appendix)

---

## Core Features

### 1. Conversational Interface
Discord is the primary interface. No apps to install, no seed phrases to manage, no terrifying "confirm transaction" popups. Just chat.

```
User: "How are we doing?"
Agent: "Pretty good! Your portfolio is up 3.2% this week.
        You have $12,340 total across 3 chains.
        ETH is at $3,450 - up from $3,200 when you bought."
```

### 2. Plain English Everything
No jargon. No technical metrics. Reports are written for humans, not traders.

```
# What most crypto tools show:
"0.285 ETH swapped for 1,000.00 USDC via LI.FI
Arbitrumâ†’Base, tx: 0x7f3a..."

# What Treasury Agent shows:
"Done! Converted about $1,000 of ETH to dollars.
Your stablecoin balance is now safer at $8,200."
```

### 3. Family Consensus (N-of-M Approvals)
Big decisions require agreement. Configure rules like:
- "Any swap over $500 needs 2 family members to approve"
- "Moving to a new chain needs Dad and one other person"
- "Daily limit of $1,000 can auto-execute; above needs approval"

This is **social multisig** - more intuitive and arguably more secure than technical multi-signature wallets.

### 4. Proactive Monitoring
The agent doesn't wait to be asked. It watches and notifies:
- "ETH dropped 8% today. Want me to buy the dip?"
- "Your stablecoin yield is now 2% lower on Arbitrum. Should I move to Base?"
- "Weekly report: You're up $340 this week. Here's the breakdown..."

### 5. Dashboard for Details
Discord handles day-to-day. The dashboard handles:
- Full transaction history
- Settings and approval rules
- Detailed analytics
- Manual overrides when needed

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERFACE STRATEGY                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  DISCORD (Primary - Day-to-Day)                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚  â€¢ Check balances                                               â”‚
â”‚  â€¢ Request swaps and transfers                                  â”‚
â”‚  â€¢ Approve/reject pending actions                               â”‚
â”‚  â€¢ Receive reports and alerts                                   â”‚
â”‚  â€¢ Ask questions in natural language                            â”‚
â”‚                                                                 â”‚
â”‚  DASHBOARD (Secondary - Details & Settings)                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚  â€¢ Full transaction history                                     â”‚
â”‚  â€¢ Configure approval rules and thresholds                      â”‚
â”‚  â€¢ Manage family members and permissions                        â”‚
â”‚  â€¢ Detailed charts and analytics                                â”‚
â”‚  â€¢ Export data for taxes                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## How It Works

### The Agent Loop

Treasury Agent follows a simple cycle: **Monitor â†’ Decide â†’ Execute â†’ Report**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TREASURY AGENT LOOP                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      MONITOR                              â”‚  â”‚
â”‚  â”‚  â€¢ Watch prices across chains                             â”‚  â”‚
â”‚  â”‚  â€¢ Track your balances automatically                      â”‚  â”‚
â”‚  â”‚  â€¢ Notice when yields change                              â”‚  â”‚
â”‚  â”‚  â€¢ Detect unusual activity                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      DECIDE                               â”‚  â”‚
â”‚  â”‚  â€¢ Should we alert the family?                            â”‚  â”‚
â”‚  â”‚  â€¢ Does this action need approval?                        â”‚  â”‚
â”‚  â”‚  â€¢ What's the best way to execute this?                   â”‚  â”‚
â”‚  â”‚  â€¢ Is this within safe limits?                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      EXECUTE                              â”‚  â”‚
â”‚  â”‚  â€¢ Small stuff: Auto-execute within limits                â”‚  â”‚
â”‚  â”‚  â€¢ Big stuff: Request family approval first               â”‚  â”‚
â”‚  â”‚  â€¢ Handle all the chain/bridge complexity                 â”‚  â”‚
â”‚  â”‚  â€¢ Use the cheapest, safest route                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      REPORT                               â”‚  â”‚
â”‚  â”‚  â€¢ "Done! Here's what happened."                          â”‚  â”‚
â”‚  â”‚  â€¢ Daily/weekly summaries in plain English                â”‚  â”‚
â”‚  â”‚  â€¢ Log everything for transparency                        â”‚  â”‚
â”‚  â”‚  â€¢ Alert on anything unusual                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technology Stack

The complexity is hidden from users, but under the hood:

| Layer | Technology | What It Does |
|-------|------------|--------------|
| **Orchestration** | n8n | Coordinates all the workflows |
| **Interface** | Discord | Where users interact |
| **Dashboard** | React + Appwrite | Settings and detailed history |
| **Same-Chain Swaps** | Uniswap v4 | Fast, cheap, direct swaps |
| **Cross-Chain** | LI.FI | Bridges assets between chains |
| **Stablecoins** | Circle Gateway | Instant USDC transfers |
| **Storage** | Appwrite | User data and history |

---

## Partner Prize Strategy

We're targeting prizes that align with our accessibility-focused agent architecture:

### Target Prizes Overview

| Partner | Prize | Amount | Our Angle |
|---------|-------|--------|-----------|
| **LI.FI** | Best AI Ã— LI.FI Smart App | $2,000 | Agent uses LI.FI as cross-chain execution layer |
| **Circle** | Best Chain Abstracted USDC Apps | $5,000 | Unified USDC balance, instant transfers |
| **Circle** | Global Payouts & Treasury Systems | $2,500 | Multi-recipient family/team payouts |
| **Uniswap** | v4 Agentic Finance | $5,000 | Agent-driven swaps via Uniswap v4 |

---

### LI.FI: Best AI Ã— LI.FI Smart App ($2,000)

**Prize Description**: "Innovative AI-powered agents using LI.FI as cross-chain execution layer"

**Our Narrative**:

> Treasury Agent makes cross-chain DeFi accessible to non-technical users through conversational AI. When a family member says "move some ETH to stablecoins," the agent uses LI.FI to find the optimal route across chains - the user never knows (or needs to know) about bridges, DEXs, or routing. LI.FI is the invisible execution layer that makes "just chat" possible.

**Key Integration Points**:
- Cross-chain swaps route through LI.FI automatically
- Agent selects optimal bridge based on speed/cost
- Users never see bridge complexity - just results
- Composer enables multi-step DeFi in single transactions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LI.FI AS INVISIBLE LAYER                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  USER EXPERIENCE                     WHAT HAPPENS               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                 â”‚
â”‚  "Convert my ETH to          â†’    Agent queries LI.FI           â”‚
â”‚   stablecoins"                    for best route                â”‚
â”‚                                           â†“                     â”‚
â”‚                                   LI.FI finds: Arbitrum ETH     â”‚
â”‚                                   â†’ Stargate â†’ Base USDC        â”‚
â”‚                                           â†“                     â”‚
â”‚                                   Agent executes                â”‚
â”‚                                           â†“                     â”‚
â”‚  "Done! $3,400 now in         â†   Transaction complete          â”‚
â”‚   stablecoins on Base"                                          â”‚
â”‚                                                                 â”‚
â”‚  User never sees: bridges, gas, routing, chains, confirmations  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Circle: Best Chain Abstracted USDC Apps ($5,000)

**Prize Description**: "Apps treating multiple chains as unified liquidity"

**Our Narrative**:

> For a family managing crypto together, "which chain is my money on?" shouldn't matter. Treasury Agent uses Circle Gateway to present a single unified balance. When the agent says "you have $8,200 in stablecoins," that's the total across Ethereum, Arbitrum, Base, and more. Moving between chains happens in under 500ms - users just see instant results.

**Key Integration Points**:
- Single balance view across all chains
- Sub-500ms cross-chain USDC transfers
- No pre-positioned liquidity needed
- Users never think about chains

---

### Circle: Global Payouts & Treasury Systems ($2,500)

**Prize Description**: "Automated multi-recipient settlement with USDC"

**Our Narrative**:

> Families and small teams need to distribute funds - allowances, expense reimbursements, contributor payments. Treasury Agent enables Discord-triggered payouts: "Send $200 to each kid for the month" executes automatically with appropriate approvals, settling instantly via Circle Gateway.

---

### Uniswap: v4 Agentic Finance ($5,000)

**Prize Description**: "Agent-driven financial systems using Uniswap v4"

**Our Narrative**:

> Treasury Agent exemplifies "agentic finance" - autonomous monitoring, threshold-based decisions, and programmatic execution. For same-chain operations, the agent uses Uniswap v4 directly for optimal execution. The agent queries v4 pools for real-time pricing and executes swaps through the protocol - all invisible to users who just asked to "swap some ETH."

---

## Technical Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYSTEM ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                      â”‚    DISCORD      â”‚                        â”‚
â”‚                      â”‚  (User Chat)    â”‚                        â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         n8n                             â”‚    â”‚
â”‚  â”‚              (Workflow Orchestration)                   â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  â”‚ Daily   â”‚ â”‚ Price   â”‚ â”‚ Swap    â”‚ â”‚ Approvalâ”‚       â”‚    â”‚
â”‚  â”‚  â”‚ Report  â”‚ â”‚ Monitor â”‚ â”‚ Execute â”‚ â”‚ Handler â”‚       â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                               â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚                â”‚                â”‚                â”‚
â”‚              â–¼                â–¼                â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   UNISWAP    â”‚  â”‚    LI.FI     â”‚  â”‚   CIRCLE     â”‚          â”‚
â”‚  â”‚  Same-chain  â”‚  â”‚  Cross-chain â”‚  â”‚   Gateway    â”‚          â”‚
â”‚  â”‚    swaps     â”‚  â”‚   bridges    â”‚  â”‚  USDC moves  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â–¼                                 â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                      â”‚    APPWRITE     â”‚                        â”‚
â”‚                      â”‚  (Data + Auth)  â”‚                        â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â–¼                                 â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                      â”‚   DASHBOARD     â”‚                        â”‚
â”‚                      â”‚ (Settings/History)                       â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Storage

**Appwrite Database** stores all persistent data:

| Collection | Purpose |
|------------|---------|
| `price_history` | Historical prices for reports |
| `executions` | All transactions and swaps |
| `alerts` | Alert history and acknowledgments |
| `balances` | Treasury snapshots across chains |
| `approvals` | Pending and completed approvals |
| `members` | Family/team member permissions |

---

## Workflow Details

### Workflow 1: Daily Report

Every morning, the agent posts a friendly summary to Discord.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WORKFLOW: Daily Report                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Trigger: 9:00 AM daily                                         â”‚
â”‚                                                                 â”‚
â”‚  [Cron] â†’ [Get Balances] â†’ [Get Prices] â†’ [Format Report]       â”‚
â”‚                                                 â†“                â”‚
â”‚                                        [Post to Discord]        â”‚
â”‚                                                                 â”‚
â”‚  Example Output:                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚  "Good morning! Here's your daily update:                       â”‚
â”‚                                                                 â”‚
â”‚   ğŸ’° Total: $12,340 (+2.1% this week)                           â”‚
â”‚   ğŸ“Š ETH: $4,140 (1.2 ETH @ $3,450)                             â”‚
â”‚   ğŸ’µ Stables: $8,200 across 3 chains                            â”‚
â”‚                                                                 â”‚
â”‚   Nothing needs your attention today."                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Workflow 2: Price Monitor

Watches prices and alerts when thresholds are crossed.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WORKFLOW: Price Monitor                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Trigger: Every 5 minutes                                       â”‚
â”‚                                                                 â”‚
â”‚  [Interval] â†’ [Get Price] â†’ [Check Thresholds] â†’ [IF Alert?]    â”‚
â”‚                                                       â†“ Yes     â”‚
â”‚                                              [Discord Alert]    â”‚
â”‚                                                                 â”‚
â”‚  Example Alert:                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  "Heads up! ETH dropped 5% in the last hour.                    â”‚
â”‚   Current price: $3,280                                         â”‚
â”‚                                                                 â”‚
â”‚   Your ETH is now worth $3,936 (was $4,140)                     â”‚
â”‚                                                                 â”‚
â”‚   Want me to:                                                   â”‚
â”‚   â€¢ Buy more at this price?                                     â”‚
â”‚   â€¢ Convert some to stablecoins?                                â”‚
â”‚   â€¢ Do nothing (just watching)"                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Workflow 3: Swap Executor

Handles swap requests with appropriate approvals.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WORKFLOW: Swap Executor                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Trigger: Discord command or dashboard                          â”‚
â”‚                                                                 â”‚
â”‚  [Request] â†’ [Check Amount] â†’ [Needs Approval?]                 â”‚
â”‚                                      â”‚                          â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                          â–¼                       â–¼              â”‚
â”‚                    [Auto-Execute]        [Request Approval]     â”‚
â”‚                          â”‚                       â”‚              â”‚
â”‚                          â”‚              [Wait for N-of-M]       â”‚
â”‚                          â”‚                       â”‚              â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                      â–¼                          â”‚
â”‚                          [Route: Uniswap or LI.FI]              â”‚
â”‚                                      â”‚                          â”‚
â”‚                                      â–¼                          â”‚
â”‚                              [Execute Swap]                     â”‚
â”‚                                      â”‚                          â”‚
â”‚                                      â–¼                          â”‚
â”‚                          [Report to Discord]                    â”‚
â”‚                                                                 â”‚
â”‚  Example Interaction:                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚  User: "@Agent swap $2000 ETH to USDC"                          â”‚
â”‚  Agent: "Got it! This is over $500 so I need one more           â”‚
â”‚          approval. @Dad or @Sister - can you confirm?"          â”‚
â”‚  Dad: "âœ…"                                                       â”‚
â”‚  Agent: "Approved! Swapping now..."                             â”‚
â”‚  Agent: "Done! Converted $2,000 of ETH to USDC.                 â”‚
â”‚          You received 1,998.50 USDC (0.075% fee).               â”‚
â”‚          Stablecoin balance is now $10,198.50"                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Workflow 4: Weekly Summary

Comprehensive weekly report with trends and insights.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WORKFLOW: Weekly Summary                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Trigger: Monday 8:00 AM                                        â”‚
â”‚                                                                 â”‚
â”‚  [Cron] â†’ [Read Week History] â†’ [Calculate Stats] â†’ [Format]    â”‚
â”‚                                                         â†“       â”‚
â”‚                                                 [Post Discord]  â”‚
â”‚                                                                 â”‚
â”‚  Example Output:                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚  "Weekly Recap (Jan 27 - Feb 3)                                 â”‚
â”‚                                                                 â”‚
â”‚   ğŸ“ˆ Portfolio: $12,340 â†’ $12,680 (+2.7%)                       â”‚
â”‚                                                                 â”‚
â”‚   This week:                                                    â”‚
â”‚   â€¢ ETH went from $3,200 to $3,450 (+7.8%)                      â”‚
â”‚   â€¢ You swapped $500 ETH â†’ USDC on Tuesday                      â”‚
â”‚   â€¢ No alerts triggered                                         â”‚
â”‚                                                                 â”‚
â”‚   Your stablecoins earned $4.20 in yield.                       â”‚
â”‚                                                                 â”‚
â”‚   Looking ahead: ETH has been volatile. Want me                 â”‚
â”‚   to tighten the price alerts?"                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## N-of-M Approval System

A key differentiator: **social consensus** for security.

### How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    N-OF-M APPROVAL FLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  CONFIGURATION (set in dashboard)                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
â”‚                                                                 â”‚
â”‚  Family Members:                                                â”‚
â”‚  â€¢ Dad (@dad#1234) - Admin                                      â”‚
â”‚  â€¢ Mom (@mom#5678) - Admin                                      â”‚
â”‚  â€¢ Alex (@alex#9012) - Member                                   â”‚
â”‚  â€¢ Sam (@sam#3456) - Member                                     â”‚
â”‚                                                                 â”‚
â”‚  Approval Rules:                                                â”‚
â”‚  â€¢ Under $100: Auto-execute                                     â”‚
â”‚  â€¢ $100-$1000: 1 admin approval                                 â”‚
â”‚  â€¢ $1000-$5000: 2 approvals (any member)                        â”‚
â”‚  â€¢ Over $5000: 2 admins required                                â”‚
â”‚                                                                 â”‚
â”‚  FLOW EXAMPLE                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚                                                                 â”‚
â”‚  1. Alex requests: "Swap $2000 ETH to USDC"                     â”‚
â”‚                                                                 â”‚
â”‚  2. Agent checks: $2000 needs 2 approvals                       â”‚
â”‚     Alex counts as 1 (requester auto-approves)                  â”‚
â”‚                                                                 â”‚
â”‚  3. Agent posts:                                                â”‚
â”‚     "Alex wants to swap $2000 ETH â†’ USDC                        â”‚
â”‚      Need 1 more approval from: @Dad @Mom @Sam                  â”‚
â”‚      Reply âœ… to approve or âŒ to reject"                        â”‚
â”‚                                                                 â”‚
â”‚  4. Mom replies: "âœ…"                                            â”‚
â”‚                                                                 â”‚
â”‚  5. Agent executes and reports:                                 â”‚
â”‚     "Approved by Alex + Mom. Swap complete!"                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Why This Is More Secure

| Traditional Crypto | Treasury Agent |
|-------------------|----------------|
| One person holds seed phrase | Multiple people must agree |
| 2FA protects one account | Social consensus required |
| If phone is stolen, funds at risk | Attacker needs multiple family members |
| Single point of failure | Distributed trust |

### Timeout Handling

```
Rules:
â€¢ Pending approvals expire after 30 minutes (configurable)
â€¢ On timeout: Cancel and notify requester
â€¢ Urgent flag: Can request faster response
â€¢ Dashboard shows all pending approvals
```

---

## Execution Layer Design

### Intelligent Routing

The agent automatically picks the best execution path:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXECUTION ROUTING                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  USER REQUEST: "Swap ETH to USDC"                               â”‚
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚ AGENT LOGIC â”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                           â”‚                                     â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚            â”‚            â”‚                        â”‚
â”‚              â–¼            â–¼            â–¼                        â”‚
â”‚       Same Chain?   Cross Chain?   USDC Only?                   â”‚
â”‚              â”‚            â”‚            â”‚                        â”‚
â”‚              â–¼            â–¼            â–¼                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â”‚UNISWAP â”‚  â”‚ LI.FI  â”‚  â”‚ CIRCLE â”‚                      â”‚
â”‚         â”‚  v4    â”‚  â”‚        â”‚  â”‚GATEWAY â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                 â”‚
â”‚  Decision Logic:                                                â”‚
â”‚  â€¢ Same chain swap â†’ Uniswap (fastest, cheapest)                â”‚
â”‚  â€¢ Cross chain swap â†’ LI.FI (finds best bridge)                 â”‚
â”‚  â€¢ USDC between chains â†’ Circle Gateway (<500ms)                â”‚
â”‚                                                                 â”‚
â”‚  User never knows which path was used - just sees results.      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Why This Matters for Users

They don't need to understand:
- What a bridge is
- Which chain their money is on
- Gas fees and optimization
- DEX routing

They just say what they want, and the agent handles it.

---

## Technology Deep Dives

### n8n Workflow Automation

n8n is the brain that coordinates everything:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    n8n MENTAL MODEL                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  TRIGGERS (What starts a workflow)                              â”‚
â”‚  â”œâ”€â”€ Cron: "Every day at 9am"                                   â”‚
â”‚  â”œâ”€â”€ Interval: "Every 5 minutes"                                â”‚
â”‚  â”œâ”€â”€ Webhook: "When Discord sends a message"                    â”‚
â”‚  â””â”€â”€ Manual: "When we click execute"                            â”‚
â”‚                                                                 â”‚
â”‚  ACTIONS (What the workflow does)                               â”‚
â”‚  â”œâ”€â”€ HTTP Request: Call Uniswap, LI.FI, Circle APIs             â”‚
â”‚  â”œâ”€â”€ Code: Transform data, make decisions                       â”‚
â”‚  â”œâ”€â”€ Discord: Send messages, read reactions                     â”‚
â”‚  â””â”€â”€ Database: Store/retrieve from Appwrite                     â”‚
â”‚                                                                 â”‚
â”‚  FLOW CONTROL (How it decides)                                  â”‚
â”‚  â”œâ”€â”€ IF: "Is this over $500?"                                   â”‚
â”‚  â”œâ”€â”€ Switch: "Which approval tier?"                             â”‚
â”‚  â”œâ”€â”€ Wait: "Pause for approval"                                 â”‚
â”‚  â””â”€â”€ Merge: "Combine data from multiple sources"                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Uniswap v4 (Same-Chain Execution)

For swaps within a single chain, we use Uniswap directly:

```javascript
// What the agent does behind the scenes

// 1. Get current price
const poolData = await queryUniswapSubgraph(`{
  pool(id: "0x...") {
    token0Price
    liquidity
  }
}`);

// 2. Build swap transaction
const swapTx = buildUniswapSwap({
  tokenIn: 'ETH',
  tokenOut: 'USDC',
  amount: userRequestedAmount,
  slippage: 0.5  // 0.5% max slippage
});

// 3. Execute
const result = await executeTransaction(swapTx);

// 4. Report in plain English
postToDiscord(`Done! Swapped ${formatCurrency(amount)} ETH
for ${result.received} USDC.`);
```

### LI.FI (Cross-Chain Execution)

When assets need to move between chains:

```javascript
// User says: "Move my ETH from Arbitrum to Base"

// 1. Get optimal route
const quote = await lifi.getQuote({
  fromChain: 'arbitrum',
  toChain: 'base',
  fromToken: 'ETH',
  toToken: 'USDC',
  amount: userAmount
});

// 2. LI.FI handles:
//    - Finding best bridge (Stargate, Hop, etc.)
//    - Optimal DEX routing
//    - Gas estimation
//    - Fallback if bridge fails

// 3. Execute and report
postToDiscord(`Done! Your ETH is now USDC on Base.
Took about 2 minutes via Stargate bridge.`);
```

### Circle Gateway (USDC Transfers)

For moving stablecoins between chains instantly:

```javascript
// User says: "Move $5000 USDC to Base"

// 1. Gateway provides unified balance
const balance = await circleGateway.getBalance(treasuryAddress);
// Returns total across ALL chains, not per-chain

// 2. Transfer in <500ms
const transfer = await circleGateway.transfer({
  amount: 5000,
  toChain: 'base',
  recipient: treasuryAddress
});

// 3. Report
postToDiscord(`Done! $5,000 USDC moved to Base instantly.`);
```

---

## Development Plan

### Phase 1: Core Agent (Days 1-2)

| Task | Details |
|------|---------|
| n8n setup | Deploy to Hostinger VPS |
| Discord integration | Webhooks for messages |
| Daily report workflow | Balance + price summary |
| Price monitor | Alert on threshold cross |
| Basic swap execution | Same-chain via Uniswap |

### Phase 2: Cross-Chain + Approvals (Days 2-3)

| Task | Details |
|------|---------|
| LI.FI integration | Cross-chain swaps |
| Circle Gateway | Fast USDC transfers |
| N-of-M approval flow | Discord-based consensus |
| Dashboard basics | Settings + history |

### Phase 3: Polish + Demo (Day 3)

| Task | Details |
|------|---------|
| Plain English formatting | Human-friendly messages |
| Error handling | Graceful failures |
| Demo video | 3-minute walkthrough |
| Documentation | README + architecture |

---

## Success Metrics

### What Success Looks Like

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    âœ… SUCCESS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  USER EXPERIENCE                                                â”‚
â”‚  â–¡ Non-technical person can check balance via Discord           â”‚
â”‚  â–¡ Swap request â†’ execution takes < 5 messages                  â”‚
â”‚  â–¡ Reports are readable without crypto knowledge                â”‚
â”‚  â–¡ N-of-M approval works via Discord reactions                  â”‚
â”‚                                                                 â”‚
â”‚  TECHNICAL FUNCTION                                             â”‚
â”‚  â–¡ Daily reports post automatically                             â”‚
â”‚  â–¡ Price alerts trigger correctly                               â”‚
â”‚  â–¡ Swaps execute on testnet with real protocols                 â”‚
â”‚  â–¡ Cross-chain transfers work via LI.FI                         â”‚
â”‚                                                                 â”‚
â”‚  DEMO QUALITY                                                   â”‚
â”‚  â–¡ 3-minute video shows full flow                               â”‚
â”‚  â–¡ Family scenario is compelling                                â”‚
â”‚  â–¡ Technical architecture is clear                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### The Real Test

> Can your mom use it?

If a non-technical family member can:
1. Ask for the balance
2. Request a swap
3. Approve someone else's request
4. Understand the weekly report

...we've succeeded.

---

## Resources & Appendix

### Documentation Links

| Resource | URL |
|----------|-----|
| n8n Docs | https://docs.n8n.io/ |
| Uniswap v4 | https://docs.uniswap.org/contracts/v4/overview |
| LI.FI Docs | https://docs.li.fi/ |
| Circle Gateway | https://developers.circle.com/gateway |
| Appwrite | https://appwrite.io/docs |

### Code Snippets

#### Plain English Report Formatting

```javascript
// Transform technical data into human-readable report
function formatDailyReport(data) {
  const { balances, prices, weekChange } = data;

  const total = balances.reduce((sum, b) => sum + b.valueUsd, 0);
  const changeEmoji = weekChange >= 0 ? 'ğŸ“ˆ' : 'ğŸ“‰';
  const changeText = weekChange >= 0 ? 'up' : 'down';

  return `
Good morning! Here's your daily update:

ğŸ’° **Total**: ${formatCurrency(total)} (${changeText} ${Math.abs(weekChange)}% this week) ${changeEmoji}

**Breakdown:**
${balances.map(b => `â€¢ ${b.symbol}: ${formatCurrency(b.valueUsd)}`).join('\n')}

${getInsight(data)}
  `.trim();
}

function getInsight(data) {
  // Add contextual, helpful insights
  if (data.weekChange > 5) {
    return "Great week! Your patience is paying off.";
  } else if (data.weekChange < -5) {
    return "Rough week, but you're in it for the long term.";
  } else {
    return "Steady as she goes. Nothing needs your attention.";
  }
}
```

#### N-of-M Approval Check

```javascript
// Check if request has enough approvals
function checkApprovalStatus(request, approvals, rules) {
  const amount = request.amount;
  const requiredApprovals = getRequiredApprovals(amount, rules);

  // Requester auto-approves
  const currentApprovals = [request.requesterId, ...approvals.map(a => a.userId)];
  const uniqueApprovers = [...new Set(currentApprovals)];

  return {
    approved: uniqueApprovers.length >= requiredApprovals,
    current: uniqueApprovers.length,
    required: requiredApprovals,
    pendingFrom: rules.approvers.filter(a => !uniqueApprovers.includes(a.id))
  };
}
```

#### Execution Router

```javascript
// Pick the best execution path
function routeExecution(request) {
  const { fromChain, toChain, fromToken, toToken } = request;

  // Same chain = Uniswap
  if (fromChain === toChain) {
    return { executor: 'uniswap', reason: 'Same chain - direct swap' };
  }

  // USDC to USDC = Circle Gateway (fastest)
  if (fromToken === 'USDC' && toToken === 'USDC') {
    return { executor: 'circle-gateway', reason: 'USDC transfer - instant' };
  }

  // Everything else = LI.FI
  return { executor: 'lifi', reason: 'Cross-chain - finding best route' };
}
```

---

## Final Thought

Crypto doesn't have an adoption problem - it has an **accessibility problem**.

The technology works. The value proposition is real. But asking normal people to navigate seed phrases, gas fees, bridges, and DEXs is asking too much.

Treasury Agent proves a different model: **the interface is conversation, and the complexity is hidden**.

Your family can finally participate - not by learning crypto, but by chatting with an agent that handles it for them.

---

*Treasury Agent â€” Crypto for everyone, not just experts.*

*EthGlobal HackMoney 2026*
